{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport * as poseDetection from \"@tensorflow-models/pose-detection\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport Webcam from 'react-webcam';\nasync function runPoseMesh() {\n  _s();\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  await tf.ready(); // Ensure the TensorFlow.js is ready\n  await tf.setBackend('webgl'); // Set the TensorFlow.js backend\n\n  const net = await poseDetection.createDetector(poseDetection.SupportedModels.MoveNet, {\n    modelType: poseDetection.movenet.modelType.SINGLEPOSE_LIGHTNING\n  });\n  const detect = async () => {\n    if (typeof webcamRef.current !== \"undefined\" && webcamRef.current !== null && webcamRef.current.video.readyState === 4) {\n      const video = webcamRef.current.video;\n      const videoWidth = video.videoWidth;\n      const videoHeight = video.videoHeight;\n      webcamRef.current.video.width = videoWidth;\n      webcamRef.current.video.height = videoHeight;\n      canvasRef.current.width = videoWidth;\n      canvasRef.current.height = videoHeight;\n      const poses = await net.estimatePoses(video);\n      console.log(poses);\n\n      // Draw the poses onto the canvas\n      const ctx = canvasRef.current.getContext(\"2d\");\n      ctx.clearRect(0, 0, videoWidth, videoHeight);\n      ctx.drawImage(video, 0, 0, videoWidth, videoHeight);\n      poses.forEach(({\n        keypoints\n      }) => {\n        keypoints.forEach(({\n          x,\n          y,\n          score\n        }) => {\n          if (score > 0.5) {\n            ctx.beginPath();\n            ctx.arc(x, y, 5, 0, 2 * Math.PI);\n            ctx.fillStyle = \"red\";\n            ctx.fill();\n          }\n        });\n      });\n    }\n  };\n  setInterval(detect, 100);\n  return webcamRef, canvasRef;\n}\n_s(runPoseMesh, \"AwQWgsmsPhWgADiRou0jnDEtoH4=\");\n;","map":{"version":3,"names":["React","useRef","useEffect","poseDetection","tf","Webcam","runPoseMesh","_s","webcamRef","canvasRef","ready","setBackend","net","createDetector","SupportedModels","MoveNet","modelType","movenet","SINGLEPOSE_LIGHTNING","detect","current","video","readyState","videoWidth","videoHeight","width","height","poses","estimatePoses","console","log","ctx","getContext","clearRect","drawImage","forEach","keypoints","x","y","score","beginPath","arc","Math","PI","fillStyle","fill","setInterval"],"sources":["C:/Users/PC/Desktop/CodingStuff/BuildSpace/pose-js/src/components/PoseMesh.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\n\r\nimport * as poseDetection from \"@tensorflow-models/pose-detection\";\r\nimport * as tf from \"@tensorflow/tfjs\";\r\nimport Webcam from 'react-webcam';\r\n\r\nasync function runPoseMesh (){\r\n    const webcamRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n\r\n    await tf.ready(); // Ensure the TensorFlow.js is ready\r\n    await tf.setBackend('webgl'); // Set the TensorFlow.js backend\r\n\r\n    const net = await poseDetection.createDetector(poseDetection.SupportedModels.MoveNet, {\r\n      modelType: poseDetection.movenet.modelType.SINGLEPOSE_LIGHTNING,\r\n    });\r\n\r\n    const detect = async () => {\r\n      if (\r\n        typeof webcamRef.current !== \"undefined\" &&\r\n        webcamRef.current !== null &&\r\n        webcamRef.current.video.readyState === 4\r\n      ) {\r\n        const video = webcamRef.current.video;\r\n        const videoWidth = video.videoWidth;\r\n        const videoHeight = video.videoHeight;\r\n\r\n        webcamRef.current.video.width = videoWidth;\r\n        webcamRef.current.video.height = videoHeight;\r\n\r\n        canvasRef.current.width = videoWidth;\r\n        canvasRef.current.height = videoHeight;\r\n\r\n        const poses = await net.estimatePoses(video);\r\n        console.log(poses);\r\n\r\n        // Draw the poses onto the canvas\r\n        const ctx = canvasRef.current.getContext(\"2d\");\r\n        ctx.clearRect(0, 0, videoWidth, videoHeight);\r\n        ctx.drawImage(video, 0, 0, videoWidth, videoHeight);\r\n\r\n        poses.forEach(({ keypoints }) => {\r\n          keypoints.forEach(({ x, y, score }) => {\r\n            if (score > 0.5) {\r\n              ctx.beginPath();\r\n              ctx.arc(x, y, 5, 0, 2 * Math.PI);\r\n              ctx.fillStyle = \"red\";\r\n              ctx.fill();\r\n            }\r\n          });\r\n        }\r\n      );\r\n      }\r\n    };\r\n\r\n    setInterval(detect, 100);\r\n    return webcamRef,canvasRef;\r\n  };"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAEhD,OAAO,KAAKC,aAAa,MAAM,mCAAmC;AAClE,OAAO,KAAKC,EAAE,MAAM,kBAAkB;AACtC,OAAOC,MAAM,MAAM,cAAc;AAEjC,eAAeC,WAAWA,CAAA,EAAG;EAAAC,EAAA;EACzB,MAAMC,SAAS,GAAGP,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAMQ,SAAS,GAAGR,MAAM,CAAC,IAAI,CAAC;EAE9B,MAAMG,EAAE,CAACM,KAAK,CAAC,CAAC,CAAC,CAAC;EAClB,MAAMN,EAAE,CAACO,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;;EAE9B,MAAMC,GAAG,GAAG,MAAMT,aAAa,CAACU,cAAc,CAACV,aAAa,CAACW,eAAe,CAACC,OAAO,EAAE;IACpFC,SAAS,EAAEb,aAAa,CAACc,OAAO,CAACD,SAAS,CAACE;EAC7C,CAAC,CAAC;EAEF,MAAMC,MAAM,GAAG,MAAAA,CAAA,KAAY;IACzB,IACE,OAAOX,SAAS,CAACY,OAAO,KAAK,WAAW,IACxCZ,SAAS,CAACY,OAAO,KAAK,IAAI,IAC1BZ,SAAS,CAACY,OAAO,CAACC,KAAK,CAACC,UAAU,KAAK,CAAC,EACxC;MACA,MAAMD,KAAK,GAAGb,SAAS,CAACY,OAAO,CAACC,KAAK;MACrC,MAAME,UAAU,GAAGF,KAAK,CAACE,UAAU;MACnC,MAAMC,WAAW,GAAGH,KAAK,CAACG,WAAW;MAErChB,SAAS,CAACY,OAAO,CAACC,KAAK,CAACI,KAAK,GAAGF,UAAU;MAC1Cf,SAAS,CAACY,OAAO,CAACC,KAAK,CAACK,MAAM,GAAGF,WAAW;MAE5Cf,SAAS,CAACW,OAAO,CAACK,KAAK,GAAGF,UAAU;MACpCd,SAAS,CAACW,OAAO,CAACM,MAAM,GAAGF,WAAW;MAEtC,MAAMG,KAAK,GAAG,MAAMf,GAAG,CAACgB,aAAa,CAACP,KAAK,CAAC;MAC5CQ,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC;;MAElB;MACA,MAAMI,GAAG,GAAGtB,SAAS,CAACW,OAAO,CAACY,UAAU,CAAC,IAAI,CAAC;MAC9CD,GAAG,CAACE,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEV,UAAU,EAAEC,WAAW,CAAC;MAC5CO,GAAG,CAACG,SAAS,CAACb,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEE,UAAU,EAAEC,WAAW,CAAC;MAEnDG,KAAK,CAACQ,OAAO,CAAC,CAAC;QAAEC;MAAU,CAAC,KAAK;QAC/BA,SAAS,CAACD,OAAO,CAAC,CAAC;UAAEE,CAAC;UAAEC,CAAC;UAAEC;QAAM,CAAC,KAAK;UACrC,IAAIA,KAAK,GAAG,GAAG,EAAE;YACfR,GAAG,CAACS,SAAS,CAAC,CAAC;YACfT,GAAG,CAACU,GAAG,CAACJ,CAAC,EAAEC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAGI,IAAI,CAACC,EAAE,CAAC;YAChCZ,GAAG,CAACa,SAAS,GAAG,KAAK;YACrBb,GAAG,CAACc,IAAI,CAAC,CAAC;UACZ;QACF,CAAC,CAAC;MACJ,CACF,CAAC;IACD;EACF,CAAC;EAEDC,WAAW,CAAC3B,MAAM,EAAE,GAAG,CAAC;EACxB,OAAOX,SAAS,EAACC,SAAS;AAC5B;AAACF,EAAA,CAnDYD,WAAW;AAmDvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}